{% extends 'frontend/master.html' %}

{% block slide %}{% endblock %}

{% block content %}
<main class="container my-5">
    <div class="row">
        <div class="col-md-6">
            <!-- main product image -->
            <img src="{{ product.image }}" id="mainProductImage"
                 class="img-fluid rounded product-main-image" alt="{{ product[title] }}">

            <!-- thumbnails -->
            <div class="row mt-3 product-thumbnails">
                {% for thumb in product.thumbs %}
                <div class="col-3">
                    <img src="{{ thumb }}"
                         class="img-fluid rounded thumbnail-image {% if loop.first %}active{% endif %}"
                         data-src="{{ thumb }}"
                         alt="Thumbnail {{ loop.index }}">
                </div>
                {% endfor %}
            </div>
        </div>

        <div class="col-md-6">
            <h1 class="product-title">{{ product.title }}</h1>
            {% if product.category %}
            <p class="text-muted">Category: {{ product.category }}</p>
            {% endif %}
            <h2 class="product-price">${{ "%.2f"|format(product.price) }}</h2>
            <p class="lead product-description">{{ product.description }}</p>

            <hr>

            <div class="form-group">
                <label for="quantity">Quantity:</label>
                <input type="number" class="form-control quantity-input" id="quantity" value="1" min="1" max="10">
            </div>

            <!-- Add to cart â€” if you are using a form or JS cart, adapt this -->
            <a href="#" class="btn btn-primary btn-lg btn-block mt-3" id="addToCartBtn">
                <i class="fas fa-shopping-cart mr-2"></i> Add to Cart
            </a>

            <hr>

        </div>
    </div>


</main>

<!-- small JS for thumbnail click -->
<script>
document.addEventListener('DOMContentLoaded', function () {
    const mainImg = document.getElementById('mainProductImage');
    document.querySelectorAll('.thumbnail-image').forEach(el => {
        el.addEventListener('click', function () {
            // swap src
            const src = this.getAttribute('data-src') || this.src;
            mainImg.src = src;

            // active class
            document.querySelectorAll('.thumbnail-image').forEach(t => t.classList.remove('active'));
            this.classList.add('active');
        });
    });

    // Prevent the Add-to-Cart anchor from navigating if you intend to use JS
    const addBtn = document.getElementById('addToCartBtn');
    if (addBtn) {
        addBtn.addEventListener('click', function (e) {
            e.preventDefault();
            const qty = document.getElementById('quantity').value || 1;
            // TODO: call your cart API or submit a form
            alert('Add to cart: {{ product.title }} x ' + qty);
        });
    }
});
</script>

{% endblock %}
