{% extends 'frontend/master.html' %}

{% block slide %}{% endblock %}

{% block content %}
<style>
.product-card {
    transition: all .15s ease;
    cursor: pointer;
    border-radius: .75rem;
    overflow: hidden;
}
.product-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 10px 25px rgba(0,0,0,.08);
}
.card-img-top {
    height: 220px;
    object-fit: cover;
}
.card-price {
    color: #0d6efd;
    font-weight: 700;
}
</style>

<main class="container my-5">


    <div class="row g-4">
        {% for item in products %}
         <div class="col-lg-3 col-md-6">
                        <a href="{{ url_for('products.product_detail', id=item.id) }}" class="text-decoration-none text-dark">
                            <article class="card h-100 border-0 shadow-sm product-card">

                                <div class="position-relative bg-light p-3 text-center">
                                    <img src="{{ item.image }}"
                                         alt="{{ item.title }}"
                                         style="max-height: 180px; width: auto; object-fit: contain;">
                                </div>

                                <div class="card-body d-flex flex-column p-4">
                                    <h6 class="card-title fs-6 fw-semibold mb-3 text-dark">
                                        {{ item.title }}
                                    </h6>

                                    <div class="mt-auto">
                                        <div class="d-flex align-items-center gap-2 mb-3">
                                            <span class="text-primary fw-bold fs-5">${{ item.price }}</span>
                                        </div>

                                        <button class="btn btn-primary w-100 fw-medium py-2 add-to-cart-btn"
                                                onclick="event.stopPropagation();">
                                            Add to Cart
                                        </button>
                                    </div>
                                </div>

                            </article>
                        </a>
                    </div>
        {% endfor %}
    </div>


</main>

<script>
document.addEventListener("DOMContentLoaded", () => {

    // Entire card clickable
    document.querySelectorAll("[data-href]").forEach(card => {
        card.addEventListener("click", e => {
            if (e.target.closest("button")) return; // ignore button click
            window.location.href = card.getAttribute("data-href");
        });
    });

    // Add to Cart demo
    document.querySelectorAll("button[data-product-id]").forEach(btn => {
        btn.addEventListener("click", e => {
            e.stopPropagation();
            const id = btn.dataset.productId;
            alert("Added to cart: Product " + id);
        });
    });

});
</script>

{% endblock %}
